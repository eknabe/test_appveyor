version: 1.0.{build}
image:
- Visual Studio 2017
- Ubuntu1804
configuration: Release
platform:
- x64
    
  
for:
  -
    matrix:
      only:
        - image: Visual Studio 2017
          platform: x64
    build_script:
      - echo Visual Studio 2017 x64 build script
      - cmd:
          call "C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Auxiliary\Build\vcvars64.bat"
          
          cl main.cpp /Fe: app.exe

#    after_build:
#      - cmd:
#          appveyor PushArtifact app.exe
          
  -
    matrix:
      only:
        - image: Ubuntu1804
    init:
      - echo Ubuntu build script
      - sh: >-
          sudo apt-get install -y libgl1-mesa-dev libxrandr-dev libxinerama-dev
          
    build_script:
      - sh: >-
          gcc main.cpp -o app

#    after_build:
#      - sh: >-
#          appveyor PushArtifact app


artifacts:
- path: app????
  name: test_app_release
  
deploy:
- provider: GitHub
  artifact: test_app_release
  auth_token:
    secure: 2ac0102f1ba67daf57dadf7f4fbd5e192faa8081
          